<!-- <div class="row">
    <div class="row">
        
    </div>
  </div>
  <div *ngIf="showSuperLoading" class="InterimLoader">
    <div class="loaderParent">
      <i class="fa fa-spinner fa-pulse fa-1x fa-fw"></i>
  </div>
  </div>
  
  <div id="main">
      <div class="col-md-9 col-md-push-3">.col-md-9 .col-md-push-3</div>
  <div class="col-md-3 col-md-pull-9">.col-md-3 .col-md-pull-9</div>
</div> -->
<div class="row" >
    <div
    style=" width: 80%;" 
    class="col-xs-12 col-md-8 col-md-offset-1">
    
    <div class="row left" style="margin-top: 10px; margin-left: 5px;">
        <h2 
        class="col-xs-10">Add Product</h2>
        <div class="row col-xs-2">
            <!-- <button 
            style="float: right; margin-top: 10px;"
            class="btn btn-rounded btnnew"
            (click)="a(quantityTemplate)"
            >
            Add Quantity
            </button> -->
        </div>
    </div>
    
  

    <!-- form -->


    <form
          (ngSubmit)="addProductForm(f, quantityTemplate)" 
          #f="ngForm" 
          class="productForm form-horizontal"
        >

        <div class="postsignup">
                <div class="error" *ngIf="postSubmit" >{{error}}</div>
        </div>
    
        <div class="form-group">
            <label for="sku">SKU : </label>
            <input 
            type="text" 
            id="sku" 
            name="sku" 
            ngModel 
            class="form-control input"
            required
            #sku="ngModel"
            [(ngModel)]='defaultProductSku'
            autocomplete="off"
            >
            <span 
            *ngIf="!sku.valid && sku.touched" 
            class="help-block">Enter Valid Input!</span>
         </div>

         <div class="form-group">
            <label for="tax">TAX : </label>
            <input 
            type="text" 
            id="tax" 
            name="tax" 
            ngModel 
            [(ngModel)]="this.defaultProductTax"
            class="form-control input"
            required
            #tax="ngModel"
            autocomplete="off"
            >
            <span 
            *ngIf="!tax.valid && tax.touched" 
            class="help-block">Enter Valid Input!</span>
         </div>

      <div class="form-group">
          <label 
          for="superCategory">Super Category : </label>

          <select 
          name="superCategory" 
          class="form-control"
          ngModel
          [disabled]="superCategories.length < 1"
          (change)="onChange($event.target.value)"
          [ngModel]="defaultProductSuperCategory"
          >
            <option value="">Please choose an option</option>
              <option 
              selected
              *ngFor="let super of superCategories; let i = index"
              [value]="i"
              >{{super.super_category_name}}</option>
          </select>
      </div>
      <div class="form-group">
          <label 
          for="category">Category : </label>
          <select 
          (change)="onChangeCategory($event.target.value)"
          name="category" 
          class="form-control"
          ngModel
          [disabled]="categories.length < 1"
          [ngModel]="defaultProductCategory"
          >
          <option value="" >Please choose an option</option>
          <option 
          *ngFor="let category of categories; let i = index"
          [value]="i">{{category.category_name}}</option>
          </select>
      </div>
      <div class="form-group">
          <label 
          for="subCategory">Sub-Category : </label>
          <select 
          name="subCategory" 
          class="form-control" 
          ngModel
          [disabled]="subCategory.length < 1"
          [ngModel]="defaultProductSubCategory"
          >
          <option value="">Please choose an option</option>
              <option 
              [value]="i"
              *ngFor="let super of subCategory ;let i = index"
              >{{super.sub_category_name}}</option>
          </select>
      </div>

      <div class="form-group">
        <label for="name">Product Name : </label>
        <input 
        type="text" 
        id="name" 
        name="name" 
        ngModel 
        class="form-control input"
        required
        #name="ngModel"
        [(ngModel)]="defaultProductName"
        autocomplete="off"
        >
        <span 
        *ngIf="!name.valid && name.touched" 
        class="help-block">Enter Valid Input!</span>
      </div>
      
      
      <div class="form-group">
        <label for="desc">Description : </label>
        <textarea 
        style="overflow:hidden" 
        rows="4" 
        cols="50"
        name="desc" 
        [(ngModel)]="defaultProductDesc"
        ngModel 
        class="form-control input"
        #desc="ngModel"
        autocomplete="off"
        ></textarea>
      </div>
      <div class="form-group">
            <label for="mrp">MRP : </label>
            <input 
            type="text" 
            id="mrp" 
            name="mrp" 
            ngModel 
            [(ngModel)]="defaultProductMRP"
            class="form-control input"
            required
            #mrp="ngModel"
            autocomplete="off"
            >
            <span 
            *ngIf="!mrp.valid && mrp.touched" 
            class="help-block">Enter Valid Input!</span>
       </div>

       <div class="form-group">
            <label for="sellingPrice">Selling Price : </label>
            <input 
            type="text" 
            id="sellingPrice" 
            name="sellingPrice" 
            ngModel 
            class="form-control input"
            [(ngModel)]="defaultProductSellingPrice"
            required
            autocomplete="off"
            #sellingPrice="ngModel"
            >
            <span 
            *ngIf="!sellingPrice.valid && sellingPrice.touched" 
            class="help-block">Enter Valid Input!</span>
       </div>

       <div class="form-group">
            <label 
            style="margin-top: 10px;"
            for="attributes">Custom Attributes : </label>
            <button 
            style="float: right; margin-bottom: 15px;"
            class="btn btn-rounded btnnew"
            (click)="addAttribute(attributeTemplate)"
            >
            Add Attribute
            </button>
            <table class="table">
                    <thead>
                      <tr>
                        <th class="table-name">Key Name</th>
                        <th  class="table-value">value(s)</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let row of table; let i = index" style="padding-top: 10px;">
                        <td class="table-name">{{row.name}}</td>
                        <mat-chip-list>
                            <mat-chip *ngFor="let val of row.values">{{val}}</mat-chip>
                          </mat-chip-list>
                        <!-- <td  class="table-value">{{row.values}}</td> -->
                        <th><span ><i 
                            (click)="editAttribute(attributeTemplate, i)"
                            style="color: #49b6d6"
                            class="fa fa-pencil fa-lg" ></i></span></th>
                        <th><span ><i 
                            (click)="deleteAttribute(i)"
                            style="color: #444444"
                            class="fa fa-times fa-lg" ></i></span></th>
                      </tr>
                      </tbody>
                  </table>

            <!-- <div class="example-container mat-elevation-z8">
                    <mat-table #table [dataSource]="dataSource" >
                  
                      <ng-container matColumnDef="position">
                        <mat-header-cell *matHeaderCellDef mat-sort-header>  </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.position}} </mat-cell>
                      </ng-container>
                  
                     <ng-container matColumnDef="name">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Key Name </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.name}} </mat-cell>
                      </ng-container>
                  
                      <ng-container matColumnDef="value">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Value(s) </mat-header-cell>
                        <mat-cell *matCellDef="let element"> {{element.value}}
                            <<a (click)="onEditCloseItems()" class="text-info float-right">
                                <i 
                                class="mdi mdi-{{isEditItems ? 'close' : 'pencil'}} mdi-18px"></i>
                            </a> 
                        </mat-cell>
                      </ng-container>

                       <ng-container matColumnDef="buttons">
                            <mat-header-cell *matHeaderCellDef></mat-header-cell>
                            <mat-cell *matCellDef="let group" (click)="$event.stopPropagation()">
                                <button mat-button (click)="onDelete(group.id)">
                                    <mat-icon>delete</mat-icon>
                                </button>
                            </mat-cell>
                        </ng-container> 
                  
                      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                    </mat-table>
                  </div>
                   -->
            <!-- <div class="input-group">
            <input 
            type="text" 
            id="attributes" 
            name="attributes" 
            ngModel 
            class="form-control input col-xs-4"
            required
            #avail="ngModel"
            >
          
            </div>

            <div class="input-group">
                <input 
                type="text" 
                id="attributes" 
                name="attributes" 
                ngModel 
                class="form-control input col-xs-8"
                required
                #avail="ngModel"
                >
                <span class="input-group-addon">
                    <i 
                (click)="openAddQuantity(quantityTemplate)"
                class="fa fa-plus fa-fw"></i></span>
            </div> -->
       </div>


       <div
       *ngIf="table.length === 0"
       class="form-group">
        <label for="avail">Available Quantity : </label>
        <input 
        type="text" 
        id="avail" 
        name="avail" 
        ngModel 
        class="form-control input"
        required
        autocomplete="off"
        [(ngModel)]="defaultAvailQuantity"
        #avail="ngModel"
        >
        <span 
        *ngIf="!avail.valid && avail.touched" 
        class="help-block">Enter Valid Input!</span>
      </div>



       <div class="form-group">
        <label for="productType">Product Type: </label>
       <select 
        name="productType" 
        class="form-control" 
        ngModel
        autocomplete="off"
        [ngModel]="defaultProductType"
        required >
            <option value="">Please choose an option</option>
            <option value="online" >ONLINE</option>
            <option  value="instore" >INSTORE</option>
        </select>
        

        <!-- <select 
        name="productType" 
        class="form-control" 
        ngModel
        required>
            <option disabled>Select Product Type:</option>
            <option value="online" [selected]="defaultProductType === 'ONLINE'">ONLINE</option>
            <option value="instore" [selected]="defaultProductType === 'INSTORE'">INSTORE</option>
        </select> -->
         </div>

       <div class="form-group" >
            <label for="images">Product Images : </label>
            <!-- <div class="border">
                <h4>Example-2 (Theme - dragNDrop)</h4>
                <angular-file-uploader 
                #afu3 [config]="afuConfig3" 
                [resetUpload]=resetUpload3 
                (ApiResponse)="DocUpload($event)">
                </angular-file-uploader>
              </div> -->
            <div class="dropzone"  >
              <div class="text-wrapper">
                  <input  
                  style="margin: 0 auto;"
                  type="file"  
                  id="file-1" 
                  class="inputfile inputfile-1" 
                  name="user-pic" 
                  ngModel
                  accept="image/*"
                  multiple
                  #images="ngModel"
                  (change)="onFileChange($event.target.files)"
                  >
                <!-- <div class="centered">Drop Files here to upload!</div>  -->
                <div class="centered limit">(Max 5 images are allowed)</div>
              </div>
           </div>
          </div>
        <!-- <div class="form-group" *ngIf='EditProductMode'>
            <label for="images">Product Images : </label>
            <div class="row" >
                    
                <input  
                type="file"  
                id="file-1" 
                class="inputfile inputfile-1" 
                name="user-pic" 
                ngModel
                accept="image/*"
                (change)="onFileChange($event.target.files)"
                multiple
                >
                
                <img [src]="ImageOne" 
                alt="Snow" 
                style="width:18%"
                >
                <img [src]="ImageTwo" 
                alt="Snow" 
                style="width:18%"
                >
                <img [src]="ImageThree" 
                alt="Snow" 
                style="width:18%"
                >
                <img [src]="ImageFour" 
                alt="Snow" 
                style="width:18%"
                >
                <img 
                [src]="ImageFive" 
                alt="Snow" 
                style="width:18%"
                >
            </div>
        </div> -->

        <!-- <div class="col-xs-2 text-center">
            <label for="images">Product Images : </label>
                <input  
                type="file"  
                id="file-1" 
                class="inputfile inputfile-1" 
                name="user-pic" 
                ngModel
                accept="image/*"
               (change)="onFileChange($event.target.files)"
                >
                
                <label for="file-1"> Select an Image
                  <span class="sr-only"></span>
                  <img 
                  id="blah" 
                  [src]="displayImage"
                  class="img-responsive img-circle center-block" 
                  width="100" 
                  height="100"
                  >
                </label>
            </div>
            <div class="col-xs-2 text-center">
                    <input  
                        type="file"  
                        id="file-1" 
                        class="inputfile inputfile-1" 
                        name="user-pic" 
                        ngModel
                        accept="image/*"
                       (change)="onFileChange($event.target.files)"
                        >
                        
                        <label for="file-1"> Select an Image
                          <span class="sr-only"></span>
                          <img 
                          id="blah" 
                          [src]="displayImage"
                          class="img-responsive img-circle center-block" 
                          width="100" 
                          height="100"
                          >
                        </label>
                    </div>   -->

              
    <div class="form-group">
        <button type="reset" class="btn btnnew" (click)="resetForm(f)">Reset</button>
        <button type="submit" class="btn  btnnew2">Add</button>
    </div>

     </form>
    </div>
</div>
  

  
  <!-- product -->

  <ng-template #attributeTemplate class="model">
        <div class="modal-header">
                <h4 class="modal-title pull-left title-model">Add Custom Attribute</h4>
        </div>
        <div class="modal-body">
          <form
            (ngSubmit)="addAttributeForm(f)" 
            #f="ngForm" 
          >
          <div class="form-group">
            <label for="name">Key Name <span class="blue">*</span></label>
            <input 
            type="text" 
            id="name" 
            name="name" 
            (input)="onSearchChange($event.target.value)"
            class="form-control input"
            required
            [(ngModel)]="keyName"
            autocomplete="off"
            >
            <ul class="list-group" *ngIf="attributeOptions.length > 0">
                <button type="button"
                *ngFor='let v of attributeOptions'
                (click)="selectSuggestion(v)"
                class="list-group-item">{{ v.product_spec_name }}</button>
            </ul>
          </div>
          <div 
              class="form-group">
              <label for="value">Value(s)</label>
              <ul id="myUL" *ngFor="let val of valueOption; let i = index" >
                <li 
                [ngClass]="{'checked': val.checked === true}"
                (click)="uncheck(i)"
                >{{val.val}}</li>
              </ul>
            </div>
            <div id="myDIV" class="header" style="margin-bottom: 15px;">
                <input 
                type="text" 
                id="myInput" 
                placeholder="Add Value..." 
                name=addNew
                [(ngModel)]="addNewValue"
                >
                <span 
                (click)="newElement()" 
                class="addBtn">Add Value</span>
            </div>

          <div class="row" style="float: right; margin-top: -30px;">
                <button 
                class="btn btn-modal" 
                type="button" 
                (click)="resetForm(f)"
                (click)="modalRef.hide()" >Cancel</button>
                <button class="btn btnnew" type="submit">Add</button>
          </div>
      </form>
    </div>
    </ng-template>
    

  <!-- <ng-template #attributeTemplate class="model">
      <div class="modal-header">
        <h4 class="modal-title pull-left title-model">Add Custom Attribute</h4>
      </div>
      <div class="modal-body" style="height: 150px;"> -->

        <!-- <form
          
          (ngSubmit)="addAttributeForm(f)" 
          #f="ngForm" 
        > -->
        <!-- <div class="row" *ngFor="let row of table; let i = index"></div> -->
        <!-- <div class="row" >
                <div class="col-xs-4">
                    <div class="form-group">
                        <mat-form-field>
                            <input 
                            matInput 
                            name="keyName" 
                            [(ngModel)]="keyName"
                            placeholder="Key Name">
                            </mat-form-field>
                    </div>
                </div>
                    
                <div class="col-xs-8">
                    <div class="form-group">
                        <mat-form-field 
                        class="demo-chip-list"
                        style="
                        width: 100%; 
                        margin-top: -5px;"
                        color="">
                        <mat-chip-list #chipList>
                        <mat-chip
                         *ngFor="let fruit of fruits" 
                         [selectable]="selectable"
                         [removable]="removable" 
                         (remove)="remove(fruit)">
                            {{fruit.name}}
                            <mat-icon 
                            matChipRemove 
                            *ngIf="removable">cancel</mat-icon>
                            </mat-chip>
                            <input 
                            placeholder="value(s)"
                            [matChipInputFor]="chipList"
                            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                            [matChipInputAddOnBlur]="addOnBlur"
                            (matChipInputTokenEnd)="add($event)" />
                        </mat-chip-list>
                        </mat-form-field> 
                        </div>
                </div>
        </div> -->
        
        
        <!-- <button 
        class="btn btn-rounded btnnew2"
        style="margin-left: 10px"
        (click)="addRow()"
        >
        <i class="fa fa-plus"></i>
        New Attribute
        </button>
   -->
        <!-- <div class="row" style="float: right;  ">
            <button 
            class="btn btn-modal" 
            type="button" 
            (click)="modalRef.hide()" >Cancel</button>
            <button class="btn btnnew" type="submit" 
            (click)="addAttributeForm()">Add</button>
        </div>
     </form>
  </div>
  </ng-template> -->
  










<!-- attribute try one-->
<!-- <ng-template #attributeTemplate class="model">
    <div class="modal-header">
      <h4 class="modal-title pull-left title-model">Add Custom Attribute</h4>
    </div>
    <div class="modal-body">

      
      <div class="row" *ngFor="let row of table; let i = index">
              <div class="col-xs-4">
                      <div class="form-group">
                          <mat-form-field>
                              <input 
                              matInput 
                              ngModel 
                              #KeyNameElement
                              placeholder="Key Name">
                            </mat-form-field>
                      </div>
              </div>
                  
              <div class="col-xs-8">
                  <div class="form-group">
                      <mat-form-field 
                      class="demo-chip-list"
                      style="
                      width: 100%; 
                      margin-top: -5px;"
                      color="">
                      <mat-chip-list #chipList>
                      <mat-chip
                       *ngFor="let fruit of row.product_spec_value" 
                       [selectable]="selectable"
                       [removable]="removable" 
                       (remove)="remove(fruit)">
                          {{fruit.name}}
                          <mat-icon 
                          matChipRemove 
                          *ngIf="removable">cancel</mat-icon>
                          </mat-chip>
                          <input 
                          placeholder="value(s)"
                          [matChipInputFor]="chipList"
                          [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                          [matChipInputAddOnBlur]="addOnBlur"
                          (matChipInputTokenEnd)="add($event)" />
                      </mat-chip-list>
                      </mat-form-field> 
                      </div>
              </div>
      </div>
      
      
      <button 
      class="btn btn-rounded btnnew2"
      style="margin-left: 10px"
      (click)="addRow()"
      >
      <i class="fa fa-plus"></i>
      New Attribute
      </button>

      <div class="row" style="float: right; margin-right: 20px;">
          <button class="btn btn-modal" type="button" (click)="modalRef.hide()" >Cancel</button>
          <button class="btn btnnew" type="submit" >Add</button>
      </div>
</div>
</ng-template> -->








  <!-- quantity -->

  <ng-template #quantityTemplate class="model">
        <div class="modal-header">
          <h4 class="modal-title pull-left title-model">Add Quantity</h4>
        </div>
        <div class="modal-body">
          <form
            
            (ngSubmit)="addQuantityForm(f)" 
            #f="ngForm" 
          >
          <div 
            *ngFor="let attribute of attributes; let index = index"
            class="form-group" >
                <label 
                [for]="attribute.product_spec_name">{{attribute.product_spec_name}} : </label>
                <select 
                [name]="attribute.product_spec_name" 
                class="form-control"
                ngModel
                (change)="onChangeQuantityOption($event.target.value, index)"
                >
                
                    <option 
                    *ngFor="let val of attribute.product_spec_value; let i = index"
                    [value]="val"
                    >{{val}}</option>
                </select>
            </div>
           
            <div class="form-group">
                    <label for="quantity">Quantity : </label>
                    <input 
                    type="number" 
                    id="quantity" 
                    name="quantity" 
                    ngModel 
                    [(ngModel)]="this.defaultquantity"
                    class="form-control input"
                    required
                    #quantity="ngModel"
                    >
                    <span 
                    *ngIf="!quantity.valid && quantity.touched" 
                    class="help-block">Enter Valid Input!</span>
            </div>
                 <div class="error" *ngIf="quantityError" >{{quantityErrorMessage}}</div>
    
          <div class="row" style="float: right; margin-right: 20px; margin-bottom: 10px;">
              <button class="btn btn-modal" type="button" (click)="modalRef.hide()" >Cancel</button>
              <button class="btn btnnew" type="submit" >Add</button>
          </div>
      </form>

      <div class="form-group">
            <label 
            style="margin-top: 20px;"
            for="attributes">Quantities : </label>
           <table class="table">
                <thead>
                    <tr>
                    <th 
                    *ngFor="let attribute of attributes; let i = index"
                    class="table-name">{{attribute.product_spec_name}}</th>
                    <th>Quantity</th>
                    <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let row of tempTable; let index  = index">
                    <td *ngFor="let val of row.options">
                        {{val.selectedItem}}
                    </td>
                    <td>{{row.quantity}}</td>
                    <th><span ><i 
                        (click)="editQuantity(index)"
                        style="color: #49b6d6"
                        class="fa fa-pencil fa-lg" ></i></span></th>
                    <th><span ><i 
                        (click)="deleteQuantity(index)"
                        style="color: #444444"
                        class="fa fa-times fa-lg" ></i></span></th>
                    </tr>


                    <!-- <tr *ngFor="let row of quantityTable">
                    <td *ngFor="let val of row">
                        {{val}}
                    </td>
                    <td class="table-name">{{val.quantity}}</td>
                    <th><span ><i 
                        (click)="editAttribute(attributeTemplate, i)"
                        style="color: #49b6d6"
                        class="fa fa-pencil fa-lg" ></i></span></th>
                    <th><span ><i 
                        (click)="deleteAttribute(i)"
                        style="color: #444444"
                        class="fa fa-times fa-lg" ></i></span></th>
                    </tr> -->
                </tbody>
            </table>
        </div>
    <div class="row">
        <button 
        style="float: right; margin-right: 20px;"
        class="btn btn-primary"
        (click)="saveQuantity()"
        >
        Save
        </button>
    </div>
    </div>
    </ng-template>
  
